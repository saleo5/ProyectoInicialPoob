public class Particle {
    private static final int size = 10;
    private int vx, vy;
    private int x, y;
    private Circle circle;
    private String color;
    private final boolean isRed;

    public Particle(String color, boolean isRed, int x, int y, int vx, int vy) {
        this.isRed = isRed;
        this.vx = (vx == 0) ? 1 : vx;
        this.vy = (vy == 0) ? 1 : vy;
        this.x = x;
        this.y = y;
        this.circle = new Circle(x, y, size, color);
        this.color = color;
    }

    public void move(int dt) {
        int newX = x + vx * dt;
        int newY = y + vy * dt;

        if (newX < 5 || newX > 400 - 5 - size) {
            vx *= -1;
        }
        if (newY < 5 || newY > 400 - 5 - size) {
            vy *= -1;
        }

        x += vx * dt;
        y += vy * dt;

        circle.makeInvisible();
        circle.moveHorizontal(vx * dt);
        circle.moveVertical(vy * dt);
        circle.makeVisible();
    }

    public void makeVisible() {
        this.circle.makeVisible();
    }

    public void makeInvisible() {
        this.circle.makeInvisible();
    }

    public int getX() {
        return x;
    }

    public int getY() {
        return y;
    }

    public int getVx() {
        return vx;
    }

    public int getVy() {
        return vy;
    }

    public boolean interactWithDeamon(Deamon deamon) {
        if (deamon.shouldRebound()) {
            vx *= -1;
            vy *= -1;
            return false;
        } else {
            if (x < 200) {
                int dx = (200 - x) + 10;
                x += dx;
                circle.moveHorizontal(dx);
            }
            return true;
        }
    }
}
